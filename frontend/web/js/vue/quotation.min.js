"use strict";function format(t){return t.id,t.text}function updateObject(t,e){return{...t,...e}}const urlParams=new URLSearchParams(window.location.search),p=urlParams.get("p"),yiiLib=window.yii;console.log(p),Vue.use(VeeValidate,{classes:!0,classNames:{valid:"is-valid",invalid:"is-invalid"},locale:"th",dictionary:{th:{attributes:{_default:t=>`${t} ต้องไม่ว่างเปล่า.`,coating_id:"เคลือบ",paper_size_id:"ขนาด"},messages:{required:t=>`${t} ต้องไม่ว่างเปล่า.`}}}}),Vue.component("v-select2",{props:["options","value"],template:'\n    <select class="form-control">\n      <slot></slot>\n    </select>\n  ',mounted:function(){var t=this;$(this.$el).select2(this.options).val(this.value).trigger("change").on("change",function(e){t.$emit("input",this.value),t.$emit("change",e)})},watch:{value:function(t){},options:function(t){$(this.$el).empty().select2(t)}},destroyed:function(){$(this.$el).off().select2("destroy")}}),Vue.component("v-col",{props:["xs","sm","md","lg"],computed:{colClass:function(){let t=[];if(this.xs){const e=this.prefix("xs");t.push(e+this.xs)}if(this.sm){const e=this.prefix("sm");t.push(e+this.sm)}if(this.md){const e=this.prefix("md");t.push(e+this.md)}if(this.lg){const e=this.prefix("lg");t.push(e+this.lg)}return t.join(" ")}},methods:{prefix:function(t){let e="";switch(t){case"xs":e="col-xs-";break;case"sm":e="col-sm-";break;case"md":e="col-md-";break;case"lg":e="col-lg-"}return e}},template:'<div :class="colClass"><slot></slot></div>'}),Vue.component("v-row",{template:'<div class="row"><slot></slot></div>'}),Vue.component("v-land-orient",{props:["landOrientOptions","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-land_orient" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in landOrientOptions" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-land_orient-\' + key" \n          name="TblQuotationDetail[land_orient]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '}),Vue.component("v-coating-option",{props:["options","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-coating_option" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in options" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-coating_option-\' + key" \n          name="TblQuotationDetail[coating_option]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '}),Vue.component("v-dicut",{props:["options","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-diecut" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in options" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-diecut-\' + key" \n          name="TblQuotationDetail[diecut]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '}),Vue.component("v-foli-print",{props:["options","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-foli_print" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in options" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-foli_print-\' + key" \n          name="TblQuotationDetail[foli_print]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '}),Vue.component("v-emboss-print",{props:["options","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-emboss_print" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in options" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-emboss_print-\' + key" \n          name="TblQuotationDetail[emboss_print]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '}),Vue.component("v-glue",{props:["options","value"],$_veeValidate:{value(){return this.$el.value}},data:()=>({checked:""}),mounted:function(){this.checked=this.value},template:'\n  <div id="tblquotationdetail-glue" role="radiogroup" aria-invalid="false">\n    <div v-for="(option, key) in options" :key="key" class="radio inline-block">\n      <label class="radio-inline">\n        <input type="radio" \n          :id="\'tblquotationdetail-glue-\' + key" \n          name="TblQuotationDetail[glue]" \n          :value="option.value"\n          v-model="checked"\n          v-on:input="$emit(\'input\', $event.target.value)"\n          v-on:change="$emit(\'change\', $event)">\n        <span class="cr"><i class="cr-icon fa fa-circle"></i></span> {{ option.text }}\n      </label>\n    </div>\n  </div>\n  '});const vm=new Vue({el:"#app",data:{selected:2,product:null,loadingQty:!1,priceSelected:null,step:1,select2Options:{data:[{id:1,text:"Hello"},{id:2,text:"World"}],allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกหน่วย",language:"th"},paperSizeIdOpts:{data:[],allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกขนาด",language:"th"},pageSizeUnitOpts:{data:[],allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกหน่วย",language:"th"},BookBindingOpts:{data:[],allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกรายการ...",language:"th"},paperIdOpts:{data:[],allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกกระดาษ",language:"th"},printOptionOpts:{data:[{id:"one_page",text:"พิมพ์สองหน้า"},{id:"two_page",text:"พิมพ์หน้าเดียว"}],allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกรายการ...",language:"th"},printColorOpts:{data:[],allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกรายการ...",language:"th"},coatingIdOpts:{data:[],placeholder:"เลือกรายการ ...",allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกวิธีเคลือบ",language:"th"},dicutIdOpts:{data:[],placeholder:"เลือกรายการ ...",allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกไดคัท",language:"th"},perforateOpts:{data:[],placeholder:"เลือกรายการ ...",allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือก",language:"th"},foldIdOpts:{data:[],placeholder:"เลือกรายการ ...",allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",language:"th"},foilSizeUnitOpts:{data:[],placeholder:"เลือกหน่วย ...",allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกหน่วย",language:"th"},foilColorIdOpts:{data:[],placeholder:"เลือกสีฟอยล์ ...",allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกสีฟอยล์",language:"th"},embossSizeUnitOpts:{data:[],placeholder:"เลือกหน่วย ...",allowClear:!0,theme:"bootstrap",width:"100%",placeholder:"เลือกหน่วย",language:"th"},perforateOptionOpts:{data:[],placeholder:"เลือกรายการ ...",allowClear:!0,templateResult:format,templateSelection:format,escapeMarkup:function(t){return t},theme:"bootstrap",width:"100%",placeholder:"เลือกมุมเจาะ",language:"th"},formOptions:null,formAttributes:{"_csrf-frontend":yiiLib?yiiLib.getCsrfToken():null,book_binding_id:"",coating_id:"",coating_option:"",diecut:"",diecut_id:"",emboss_print:"",emboss_size_height:"",emboss_size_unit:"",emboss_size_width:"",foil_color_id:"",foil_size_height:"",foil_size_unit:"",foil_size_width:"",fold_id:"",foli_print:"",glue:"",land_orient:"",page_qty:"",paper_id:"",paper_size_height:"",paper_size_id:"",paper_size_lenght:"",paper_size_unit:"",paper_size_width:"",perforate:"",perforate_option_id:"",print_one_page:"",print_two_page:"",print_option:"",print_color:"",quotation_id:"",cust_quantity:"",product_id:p},landOrientOptions:[{value:"1",text:"แนวตั้ง"},{value:"2",text:"แนวนอน"}],coatingOptionOptions:[{value:"one_page",text:"ด้านเดียว"},{value:"two_page",text:"สองด้าน"}],dicutOptions:[{value:"N",text:"ไม่ไดคัท"},{value:"Default",text:"ไดคัทตามรูปแบบ"},{value:"Curve",text:"ไดคัทมุมมน"}],foliPrintOptions:[{value:"two_page",text:"ทั้งหน้า/หลัง"},{value:"one_page",text:"หน้าเดียว"}],embossPrintOptions:[{value:"two_page",text:"ทั้งหน้า/หลัง"},{value:"one_page",text:"หน้าเดียว"}],glueOptions:[{value:"0",text:"No"},{value:"1",text:"Yes"}],priceList:[]},created(){$(".loading, .product-detail").removeClass("hidden")},updated:function(){this.$nextTick(function(){this.formAttributes.product_id=p,this.storeData()})},computed:{landOrientDetail:function(){if(this.isEmptyValue("land_orient"))return"-";const t=this.findDataOption(this.landOrientOptions,"value","land_orient");return this.getTextValue(t)},paperSizeDetail:function(){if(this.isEmptyValue("paper_size_id"))return"-";const t=this.findDataOption(this.paperSizeIdOpts.data,"id","paper_size_id");return t&&"custom"===this.getFormValue("paper_size_id")?this.paper_size_height?`${this.paper_size_width}x${this.paper_size_lenght}x${this.paper_size_height} ${this.paper_size_unit}`:`${this.paper_size_width}x${this.paper_size_lenght} ${this.paper_size_unit}`:this.getTextValue(t)},bookBindingDetail:function(){if(this.isEmptyValue("book_binding_id"))return"-";const t=this.findDataOption(this.BookBindingOpts.data,"id","book_binding_id");return this.getTextValue(t)},paperDetail:function(){if(this.isEmptyValue("paper_id"))return"-";const t=this.findPaper(this.paperIdOpts.data);return this.getTextValue(t)},printColorDetail:function(){if(this.isEmptyValue("print_option")||this.isEmptyValue("print_color"))return"-";const t=this.findDataOption(this.printOptionOpts.data,"id","print_option"),e=this.findDataOption(this.printColorOpts.data,"id","print_color");return this.getTextValue(t)+" "+this.getTextValue(e)},perforateDetail:function(){if(this.isEmptyValue("perforate"))return"-";const t=this.findDataOption(this.perforateOpts.data,"id","perforate");let e=null;return this.perforateOptionOpts.data.map(t=>{t.id===this.formAttributes.perforate_option_id?e=t:t.children&&t.children.map(t=>{t.id===this.formAttributes.perforate_option_id&&(e=t)})}),this.getTextValue(t)+" "+this.getTextValue(e)},foldDetail:function(){if(this.isEmptyValue("fold_id"))return"-";const t=this.findDataOption(this.foldIdOpts.data,"id","fold_id");return this.getTextValue(t)},foilDetail:function(){let t=this.getFormValue("foil_size_width"),e=this.getFormValue("foil_size_height");const i=this.findDataOption(this.foilSizeUnitOpts.data,"id","foil_size_unit"),a=this.findDataOption(this.foilColorIdOpts.data,"id","foil_color_id"),n=this.findDataOption(this.foliPrintOptions,"value","foli_print");t=this.isEmpty(t)?"":t+"x",e=this.isEmpty(e)?"":e;const o="-"===this.getTextValue(i)?"":this.getTextValue(i),s="-"===this.getTextValue(a)?"":this.getTextValue(a),l="-"===this.getTextValue(n)?"":this.getTextValue(n);return`${t}${e} ${o} ${s} ${l}`},embossDetail:function(){let t=this.getFormValue("emboss_size_width"),e=this.getFormValue("emboss_size_height");const i=this.findDataOption(this.embossSizeUnitOpts.data,"id","emboss_size_unit"),a=this.findDataOption(this.embossPrintOptions,"value","emboss_print");t=this.isEmpty(t)?"":t+"x",e=this.isEmpty(e)?"":e;const n="-"===this.getTextValue(i)?"":this.getTextValue(i);return`${t}${e} ${n} ${this.getTextValue(a)}`},glueDetail:function(){const t=this.findDataOption(this.glueOptions,"value","glue");return this.getTextValue(t)},coatingDetail:function(){if(this.isEmptyValue("coating_id"))return"-";const t=this.findDataOption(this.coatingIdOpts.data,"id","coating_id"),e=this.findDataOption(this.coatingOptionOptions,"value","coating_option"),i="-"===this.getTextValue(e)?"":this.getTextValue(e);return this.getTextValue(t)+" "+i},dicutDetail:function(){const t=this.findDataOption(this.dicutOptions,"value","diecut"),e=this.findDataOption(this.dicutIdOpts.data,"id","diecut_id"),i="-"===this.getTextValue(e)?"":this.getTextValue(e);return this.getTextValue(t)+" "+i},paper_size_width:function(){return this.formAttributes.paper_size_width?this.formAttributes.paper_size_width:""},paper_size_lenght:function(){return this.formAttributes.paper_size_lenght?this.formAttributes.paper_size_lenght:""},paper_size_height:function(){return this.formAttributes.paper_size_height?this.formAttributes.paper_size_height:""},paper_size_unit:function(){if(!this.formAttributes.paper_size_unit)return"";const t=this.pageSizeUnitOpts.data.find(t=>t.id===this.formAttributes.paper_size_unit);return t?t.text:"-"},page_qty:function(){return this.formAttributes.page_qty?this.formAttributes.page_qty:"-"}},mounted(){this.fetchDataOptions()},methods:{fetchDataOptions:function(){axios.get("/app/api/quotation?p="+p).then(t=>{const{dataOptions:e,formOptions:i,formAttributes:a}=t.data;if("1"===i.paper_size_width.value&&"1"===i.paper_size_lenght.value&&"1"===i.paper_size_unit.value)this.paperSizeIdOpts=updateObject(this.paperSizeIdOpts,{data:this.mapDataOptions(e.paperSizeOptions)});else{const t={};for(const i in e.paperSizeOptions)"custom"!==i&&(t[i]=e.paperSizeOptions[i]);this.paperSizeIdOpts=updateObject(this.paperSizeIdOpts,{data:this.mapDataOptions(t)})}this.pageSizeUnitOpts=updateObject(this.pageSizeUnitOpts,{data:this.mapDataOptions(e.paperSizeUnitOptions)}),this.BookBindingOpts=updateObject(this.BookBindingOpts,{data:this.mapDataOptions(e.bookBindingOptions)}),this.paperIdOpts=updateObject(this.paperIdOpts,{data:this.mapDataOptions(e.paperOptions)}),this.printColorOpts=updateObject(this.printColorOpts,{data:this.mapDataOptions(e.printColorOptions)}),this.coatingIdOpts=updateObject(this.coatingIdOpts,{data:this.mapDataOptions(e.coatingOptions)}),this.dicutIdOpts=updateObject(this.dicutIdOpts,{data:this.mapDataOptions(e.dicutOptions)}),this.perforateOpts=updateObject(this.perforateOpts,{data:this.mapDataOptions(e.perforateOptions)}),this.foldIdOpts=updateObject(this.foldIdOpts,{data:this.mapDataOptions(e.foldOptions)}),this.foilSizeUnitOpts=updateObject(this.foilSizeUnitOpts,{data:this.mapDataOptions(e.foilUnitOptions)}),this.foilColorIdOpts=updateObject(this.foilColorIdOpts,{data:this.mapDataOptions(e.foilColorOptions)}),this.embossSizeUnitOpts=updateObject(this.embossSizeUnitOpts,{data:this.mapDataOptions(e.embossUnitOptions)}),this.perforateOptionOpts=updateObject(this.perforateOptionOpts,{data:this.mapDataOptions(e.perforateOptionOptions)}),this.product=t.data.product,this.formOptions=t.data.formOptions;const n=JSON.parse(localStorage.getItem("formData"));if(n&&n[p]){const t=n[p];for(const e in a)t[e]&&(a[e]=t[e]);this.formAttributes=Object.assign(this.formAttributes,a)}else this.formAttributes=Object.assign(this.formAttributes,t.data.formAttributes);$("#loading, #loading2").hide()}).catch(t=>{$("#loading, #loading2").hide(),Swal.fire({type:"error",title:"Oops...",text:t.response&&t.response.statusText||"เกิดข้อผิดพลาด",showConfirmButton:!1,timer:4e3})})},onSubmit:function(){console.log("onSubmit")},isvisibleInput:function(t){return!!this.formOptions[t]&&(this.formOptions[t]&&"1"===this.formOptions[t].value)},inputLabel:function(t,e=""){return this.formOptions[t]?this.formOptions[t].label:e},onChangeLandOrient:function(t){console.log(t.target.value)},onChangePaperSizeId:function(t){"custom"!==t.target.value&&(this.formAttributes.paper_size_width="",this.formAttributes.paper_size_lenght="",this.formAttributes.paper_size_height="",this.formAttributes.paper_size_unit="",$("#paper_size_unit").val(null).trigger("change"),this.$validator.reset()),this.storeData()},onChangePrintOption:function(t){console.log(t.target.value)},onChangePrintColor:function(t){console.log(t.target.value)},onChangeBookBinding:function(t){console.log(t.target.value)},onChangeCoatingId:function(t){("N"===t.target.value||this.isEmpty(t.target.value))&&(this.formAttributes.coating_option=null,$("#tblquotationdetail-coating_option-0").attr("checked",!1),$("#tblquotationdetail-coating_option-1").attr("checked",!1),this.$validator.reset())},onChangeCoatingOption:function(t){},onChangeDidut:function(t){("N"===t.target.value||"Default"===t.target.value||this.isEmpty(t.target.value))&&(this.formAttributes.diecut_id="",$("#diecut_id").val(null).trigger("change"),this.$validator.reset())},onChangeDidutId:function(t){console.log(t.target.value)},onChangePageSizeUnit:function(t){console.log(t.target.value)},onChangePerforate:function(t){"1"!==t.target.value&&(this.formAttributes.perforate_option_id="",$("#perforate_option_id").val(null).trigger("change"),this.$validator.reset())},onChangePerforateOption:function(t){console.log(t.target.value)},onChangeFoldId:function(t){console.log(t.target.value)},onChangeFoilSizeUnit:function(t){console.log(t.target.value)},onChangeFoilColorId:function(t){console.log(t.target.value)},onChangeFoliPrint:function(t){console.log(t.target.value)},onChangeEmbossSizeUnit:function(t){console.log(t.target.value)},onChangeEmbossPrint:function(t){console.log(t.target.value)},onChangeGlue:function(t){console.log(t.target.value)},onChangePaperId:function(t){console.log(t.target.value)},mapDataOptions:function(t){let e=[];for(const i in t)"object"==typeof t[i]?e.push({id:i,text:i,children:this.mapDataOptions(t[i])}):e.push({id:i,text:t[i]});return e},findPaper:function(t){let e=null;return t.map(t=>{if(t.id===this.formAttributes.paper_id)e=t;else if(t.children.length>0)return t.children.map(t=>{t.id===this.formAttributes.paper_id&&(e=t)})}),e},isEmptyValue:function(t){const e=this.formAttributes;return this.isEmpty(e[t])},getFormValue:function(t){const e=this.formAttributes;return this.isEmpty(e[t])?"":e[t]},getTextValue:function(t){return this.isEmpty(t)||this.isEmpty(t.text)?"":this.replaceHtml(t.text)},replaceHtml:function(t){return t.replace(/<p>(.*)<\/p>/g,"")},isEmpty:function(t,e){return null==t||0===t.length||e&&""===$.trim(t)},findDataOption:function(t,e,i){return t.find(t=>!this.isEmpty(t[e])&&t[e]===this.getFormValue(i))},storeData:function(){const t={};t[p]=this.formAttributes,localStorage.setItem("formData",JSON.stringify(t))},reStoreData:function(){if(localStorage.getItem("formData")){const t=JSON.parse(localStorage.getItem("formData")),e=t[p];this.formAttributes=e}},nextStepOne:function(){this.$validator.validateAll().then(t=>{t&&this.calculatePrice()})},calculatePrice(t=null){this.loadingQty=!0;const e=new FormData;for(const t in this.formAttributes)e.append(t,this.isEmpty(this.formAttributes[t])?"":this.formAttributes[t]);if(t){let i=[];this.priceList.map(e=>{parseInt(t)!==parseInt(e.cust_quantity)&&i.push(parseInt(e.cust_quantity))}),i.length>0?(i.push(parseInt(t)),e.append("qty",i)):e.append("qty",parseInt(t))}axios.post("/app/api/calculate-price",e).then(e=>{this.priceList=e.data.price_list,t||(this.step=2,$("#preview-detail").html($(".product-panel").clone()).show(),$("html, body").animate({scrollTop:$(".preview-detail").offset().top+150},"slow")),this.loadingQty=!1,Swal.close()}).catch(t=>{this.loadingQty=!1;const e=t.response&&t.response.data&&t.response.data.message?t.response.data.message:t.response.statusText||"เกิดข้อผิดพลาด";Swal.fire({type:"error",title:"Oops...",text:e,showConfirmButton:!1,timer:4e3})})},onAddQty(){this.priceSelected=null;const t=this.formAttributes.cust_quantity;this.isEmpty(t)||this.calculatePrice(t)},onSelectedPriceItem(t,e){$(".list-group").find("li.active").removeClass("active"),$(t.target).toggleClass("active"),$(t.target).hasClass("active")?this.priceSelected=e:this.priceSelected=null},onRemovePriceItem(t){this.priceSelected&&this.priceSelected.cust_quantity===t.cust_quantity&&(this.priceSelected=null),this.priceList=this.priceList.filter(e=>e.cust_quantity!==t.cust_quantity)},onDownloadQO(){this.priceSelected?(Swal.fire({type:"warning",title:"รอสักครู่...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,animation:!1,onBeforeOpen:()=>{Swal.showLoading()}}),$.ajax({method:"GET",url:"/app/product/download",data:{p:this.formAttributes.product_id},dataType:"json",success:function(t){const e=$("#ajaxCrudModal");e.find(".modal-header").html(t.title),e.find(".modal-body").html(t.content),e.modal("show"),Swal.close()},error:function(t,e,i){Swal.fire({type:"error",title:"Oops...",text:i,showConfirmButton:!1,timer:4e3})}})):Swal.fire({type:"warning",title:"กรุณาเลือกจำนวนที่ต้องการ!",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,timer:3e3})}},watch:{formAttributes:function(t,e){},step:function(t){1===t&&($("#preview-detail").html("").show(),$("html, body").animate({scrollTop:$("#form-quotation").offset().top},"slow"))},priceSelected:function(t){t?(this.formAttributes.cust_quantity=t.cust_quantity,this.formAttributes.final_price=t.final_price,this.formAttributes.paper_detail_id=t.paper.paper_detail.paper_detail_id):(this.formAttributes.cust_quantity="",this.formAttributes.final_price="",this.formAttributes.paper_detail_id="")}}});$(window).on("load",function(){$("span.desc").hide()});